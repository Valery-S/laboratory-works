Turbo Assembler	 Version 3.1	    14/11/21 13:21:35	    Page 1
lab2com.asm



      1				     ; Лабораторная работа №2
      2				     ; Сухоруков Валерий
      3				     ; Перестановка a(n),a(n-1),a(n-2),...,a(n/2),a(1),a(2),...,a(n/2-1).
      4				     ; Односегментная программа. Создаётся com файл
      5
      6	0000			     .model tiny
      7
      8	0000			     .code
      9				     org 100h
     10	0100			     _main:
     11
     12					 ;Считывание исходного массива
     13	0100  BA 0151r			 mov dx, offset	in_str
     14	0103  C6 06 0151r 14 90		 mov in_str, 20
     15	0109  B4 0A			 mov ah, 10
     16	010B  CD 21			 int 21h
     17
     18					 ;Инициализация	регистра источника данных на конец исходного массива
     19	010D  8A 0E 0152r		 mov cl, in_str	+ 1	    ;Количество	элементов в массиве
     20	0111  32 ED			 xor ch, ch		    ;Очистка регистра ch
     21	0113  B8 0152r			 mov ax, offset	in_str+1    ;Адрес, предшествующий первому элементу
     22	0116  03 C1			 add ax,cx		    ;Запись адреса последнего элемента
     23	0118  8B F0			 mov si,ax		    ;Инициализация регистра источника данных
     24
     25					 ;Инициализация	регистра приёмника данных на начало выходного массива
     26	011A  BF 0167r			 mov di, offset	out_str
     27
     28					 ;Определения числа повторений первого цикла - Переставка второй
     29					 ;части	исходного массива в начало нового в обратном порядке.
     30					 ;Число	повторений - количество	элементов делить на 2.
     31	011D  D1 E9			 shr cx,1		     ;Деление выполняется сдвигом на 1 в право
     32
     33	011F			     m1:
     34	011F  8A 04			 mov al, [si]
     35	0121  26: 88 05			 mov es:[di],al
     36	0124  4E			 dec si
     37	0125  47			 inc di
     38	0126  E2 F7			 loop m1
     39
     40					 ;Инициализация	регистра источника данных на начало исходного массива
     41	0128  BE 0153r			 mov si, offset	in_str+2
     42
     43					 ;Определения числа повторений второго цикла - Переставка первой
     44					 ;части	исходного массива в конец нового.
     45					 ;Число	повторений - количество	элементов делить на 2.
     46	012B  8A 0E 0152r		 mov cl, in_str	+ 1
     47	012F  D1 E9			 shr cx,1
     48
     49
     50	0131			     m2:
     51	0131  8A 04			 mov al,[si]
     52	0133  26: 88 05			 mov es:[di],al
     53	0136  46			 inc si
     54	0137  47			 inc di
     55	0138  E2 F7			 loop m2
     56
     57					;Вывод пустрой строки
Turbo Assembler	 Version 3.1	    14/11/21 13:21:35	    Page 2
lab2com.asm



     58	013A  BA 017Br			 mov dx, offset	blank_str
     59	013D  B4 09			 mov ah, 9
     60	013F  CD 21			 int 21h
     61
     62					 ;Вывод	нового массива
     63	0141  BA 0167r			 mov dx, offset	out_str
     64	0144  B4 09			 mov ah, 9
     65	0146  CD 21			 int 21h
     66
     67	0148  B4 07			 mov ah, 7
     68	014A  CD 21			 int 21h
     69
     70	014C  B8 4C00			 mov ax, 4c00h
     71	014F  CD 21			 int 21h
     72
     73	0151  16*(??)			 in_str	db 22 dup (?)
     74	0167  14*(24)			 out_str db 20 dup ('$')
     75	017B  14*(24)			 blank_str db 20 dup ('$')
     76
     77				     end _main
Turbo Assembler	 Version 3.1	    14/11/21 13:21:35	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "14/11/21"
??FILENAME			  Text	 "lab2com "
??TIME				  Text	 "13:21:35"
??VERSION			  Number 030A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 LAB2COM
@INTERFACE			  Text	 00H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
BLANK_STR			  Byte	 DGROUP:017B
IN_STR				  Byte	 DGROUP:0151
M1				  Near	 DGROUP:011F
M2				  Near	 DGROUP:0131
OUT_STR				  Byte	 DGROUP:0167
_MAIN				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  018F Word	  Public  CODE
